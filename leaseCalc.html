<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Metalloine | صفحهٔ اصلی</title>

  <!-- فونت Vazirmatn -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/vazirmatn@33.003.4/Farsi-font-face.css"/>

  <style>
  :root{
    --c-primary:#8E1F61;
    --c-accent:#8FA2B2;
    --glass:rgba(255,255,255,.1);
    --r:24px;
    --g:12px;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    background:#000;color:#fff;font-family:"Vazirmatn",sans-serif;
    min-height:100vh;line-height:1.6
  }
  /*––– هدر –––*/
  #topbar{
    display:flex;justify-content:center;align-items:center;
    height:64px;margin:var(--g);
    background:var(--glass);backdrop-filter:blur(24px);
    border:1px solid rgba(255,255,255,.25);border-radius:var(--r)
  }
  .logo{display:flex;align-items:center;gap:8px;font-size:1.4rem;font-weight:700}
  .ring{width:22px;height:22px;border:6px solid var(--c-accent);border-radius:50%}
  .brand{color:var(--c-primary)}

  /*––– محتوای اصلی –––*/
  #landing{
    min-height:calc(100vh - 64px - 2*var(--g) - 140px);
    display:grid;place-items:center;text-align:center
  }
  .btn-main{
    padding:14px 32px;border:none;border-radius:var(--r);
    cursor:pointer;font-weight:700;font-size:1rem;
    background:linear-gradient(135deg,var(--c-primary),var(--c-accent));
    color:#fff;box-shadow:0 4px 10px rgba(0,0,0,.4);text-decoration:none;
    display:inline-block;transition:all .2s
  }
  .btn-main:hover{transform:translateY(-3px);box-shadow:0 6px 14px rgba(0,0,0,.5)}

  /*––– باکس قیمت تتر –––*/
  #tetherBox{
    margin:2rem auto 3rem;max-width:420px;padding:16px;
    background:var(--glass);backdrop-filter:blur(24px);
    border-radius:var(--r);border:1px solid rgba(255,255,255,.25);
    display:flex;flex-direction:column;gap:12px;align-items:center
  }
  #tetherPrice{
    width:220px;text-align:center;border:none;border-radius:var(--r);
    background:#222;color:#fff;padding:12px;font-size:1rem
  }

  footer{
    text-align:center;font-size:.8rem;opacity:.7;
    padding:.5rem 0
  }
  @media(max-width:540px){
    .btn-main{width:100%}
  }
  </style>
</head>
<body>

<!--–––– Header ––––-->
<header id="topbar">
  <span class="logo">
    <span class="ring"></span>
    <span class="brand">Metalloine</span>
  </span>
</header>

<!--–––– Landing links ––––-->
<section id="landing">
  <div style="display:flex;flex-direction:column;gap:1rem;">
    <a href="weight.html"               class="btn-main">محاسبه وزن</a>
    <a href="scrap.html"                class="btn-main">محاسبه ضایعات</a>
    <a href="hardness.html"             class="btn-main">تبدیل سختی</a>
    <a href="machining-allowances.html" class="btn-main">تلرانس ماشین‌کاری</a>
    <a href="leaseCalc.html"            class="btn-main">محاسبه لیزینگ</a>
    <a href="bank_balance.html"         class="btn-main">نمایش موجودی بانک</a>
  </div>
</section>

<!--–––– Tether price box ––––-->
<section id="tetherBox">
  <h3 style="margin-bottom:.5rem">دریافت قیمت تتر</h3>
  <button id="btnLoadTether" class="btn-main" style="width:200px;">به‌روزرسانی قیمت</button>
  <input  id="tetherPrice"  type="text" class="sepNumber" readonly placeholder="—"/>
</section>

<footer>ورژن ۱٫۰۰</footer>

<script>
/* جداکننده سه‌رقمی */
function formatNumber(n){return (+n||0).toLocaleString("en-US")}

/* فراخوانی سرورلس /api/tetherland */
async function loadTetherPrice(){
  try{
    const res=await fetch("/api/tetherland");
    if(!res.ok) throw new Error("HTTP "+res.status);
    const data=await res.json();
    if(!data.success) throw new Error(data.message||"API Error");
    document.getElementById("tetherPrice").value = formatNumber(data.tetherPrice);
  }catch(e){
    alert("خطا در دریافت قیمت تتر: "+e.message);
  }
}
document.getElementById("btnLoadTether").addEventListener("click",loadTetherPrice);

/* در بدو ورود یک‌بار تلاش می‌کنیم قیمت تتر را بگیریم */
loadTetherPrice();
</script>
</body>
</html>
